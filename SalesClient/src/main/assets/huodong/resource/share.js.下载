/* integrate-oldAndNew share.js md5:5294c366a1240cc136f5beece1f0fecf */
"use strict";seajs.use(["./js/common/config","./js/common/util","./js/common/request"],function(a,b,c){var d=a.api,e=a.href,f=b.isApp,g=b.defer,h=b.getParamValue,i=b.nativeChangeColor,j=a.text,k=b.danmu,l=b.regShare,n=(b.shareMain,b.jump),o=a.shareImg,p=b.titleFun,q=b.initJdAppShare,r=a.indexUtl;var s=h("ukey");var t=window.location.protocol+"//"+window.location.host;var u=h("source")||"";i(["#0D153D","#0D153D"]),p("\u52a9\u529b\u597d\u53cb\u62c6\u73b0\u91d1\u7ea2\u5305");var v=encodeURI(r+'?reqData={"source":"'+u+'"}');var w=encodeURIComponent(encodeURIComponent(t+"/integrate/oldAndNew/index.html?source="+u));var x=encodeURIComponent(encodeURIComponent(t+"/integrate/oldAndNew/share.html?ukey="+s+"&source="+u));var y="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94f18f5f99c2e393&redirect_uri=http%3a%2f%2fjrappgw.jd.com%2fwxjdissue%2fjdissueWX%2fview%3ftype%3dsubjectPage%26url%3d"+w+"&response_type=code&scope=snsapi_userinfo&state=1&connect_redirect=1#wechat_redirect";var z="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94f18f5f99c2e393&redirect_uri=http%3a%2f%2fjrappgw.jd.com%2fwxjdissue%2fjdissueWX%2fview%3ftype%3dsubjectPage%26url%3d"+x+"&response_type=code&scope=snsapi_userinfo&state=1&connect_redirect=1#wechat_redirect";var A=h("code")||"";var B={wxtoken:A,appidFlag:"jdjrfwh"};var C={wxNickName:"",wxImageUrl:""};A&&setTimeout(function(){$.ajax({type:"POST",url:d.getInfo,data:JSON.stringify(B),dataType:"json",contentType:"text/plain",success:function(b){"string"==typeof b&&(b=JSON.parse(b)),0==b.code&&(C.nickname=b.nickname,C.headimgurl=b.headimgurl)},error:function(b,c,d){}})},100),D();function D(){c(d.isMyselfEnvelop,"post",{ukey:s},!1,function(a){a&&0===a.resultCode?"00"==a.resultData.code?n(v):c(d.envelopInfo,"post",{ukey:s,source:u},!1,function(a){if($("#pageLoading").hide(),b.pageShow(),c(d.initCover,"post",{source:u},!1,function(a){try{k(a),$(".share-redEnvelopes-over-tips-gq-s span").text(a.resultData.data.userCount)}catch(a){}}),a&&0===a.resultCode)if("00"==a.resultData.code)if(a.resultData.data.done){$("#complete").show(),$("#unfinished").hide(),$("#overdue").hide(),$("#completeImg").attr("src",a.resultData.data.photo),$("#completeAmt").text(a.resultData.data.obtain),$("#complete_shareBtn").on("click",function(){n(v)}),l(o,"\u6211\u6210\u529f\u9886\u53d6\u4e861\u4e2a\u7ea2\u5305\uff0c\u6d3b\u52a8\u5f88\u9760\u8c31 \u901f\u9886\uff01","\u4eb2\u6d4b\u7ea2\u5305\u53ef\u9886\uff01\u5feb\u6765\uff01",y);var f={shareTitle:"\u4eb2\u6d4b\u7ea2\u5305\u53ef\u9886\uff01\u5feb\u6765\uff01",shareSubtitle:"\u6211\u6210\u529f\u9886\u53d6\u4e861\u4e2a\u7ea2\u5305\uff0c\u6d3b\u52a8\u5f88\u9760\u8c31 \u901f\u9886\uff01",shareExplain:"\u6211\u6210\u529f\u9886\u53d6\u4e861\u4e2a\u7ea2\u5305\uff0c\u6d3b\u52a8\u5f88\u9760\u8c31 \u901f\u9886\uff01",shareUrl:t+"/integrate/oldAndNew/index.html?source="+u,shareImgUrl:o};q(f)}else{$("#complete").hide(),$("#unfinished").show(),$("#overdue").hide(),$("#unfinishedImg").attr("src",a.resultData.data.photo),$("#unfinishedAmt").text(a.resultData.data.left),$("#shareBtnForTa").on("click",function(){$("#pageLoading").show(),c(d.openEnvelop,"post",{ukey:s,source:u,wxNickName:C.nickname,wxImageUrl:C.headimgurl},!0,function(a){$("#pageLoading").hide(),a&&0===a.resultCode?F(a):3===a.resultCode?window.location.href=e.login:$("body").alert({text:"<h2>"+j+"</h2>"})})}),l(o,"\u6211\u62bd\u5230\u4e861\u4e2a\u7ea2\u5305,\u62c6\u5b8c\u53ef\u63d0\u73b0\uff01\u5e2e\u62c6\u6210\u529f\u6709\u5956\u52b1~\u5feb\uff01","\u53ea\u6709\u4f60\u80fd\u5e2e\u6211\uff0c\u6211\u81ea\u5df1\u90fd\u4e0d\u884c\uff01",z);var g={shareTitle:"\u53ea\u6709\u4f60\u80fd\u5e2e\u6211\uff0c\u6211\u81ea\u5df1\u90fd\u4e0d\u884c\uff01",shareSubtitle:"\u6211\u62bd\u5230\u4e861\u4e2a\u7ea2\u5305,\u62c6\u5b8c\u53ef\u63d0\u73b0\uff01\u5e2e\u62c6\u6210\u529f\u6709\u5956\u52b1~\u5feb\uff01",shareExplain:"\u6211\u62bd\u5230\u4e861\u4e2a\u7ea2\u5305,\u62c6\u5b8c\u53ef\u63d0\u73b0\uff01\u5e2e\u62c6\u6210\u529f\u6709\u5956\u52b1~\u5feb\uff01",shareUrl:t+"/integrate/oldAndNew/share.html?ukey="+s+"&source="+u,shareImgUrl:o};q(g)}else if("10005"==a.resultData.code){$("#complete").hide(),$("#unfinished").hide(),$("#overdue").show(),$("#overdue_shareBtn").on("click",function(){c(d.finishedEnvelop,"post",{source:u},!1,function(a){a&&0===a.resultCode?"00"==a.resultData.code?n(v):"1001"==a.resultData.code?n(t+("/integrate/oldAndNew/inviteFriends.html?source="+u)):"1002"==a.resultData.code?($("#item10").show(),$("#s1002").on("click",function(){n(t+("/integrate/oldAndNew/inviteFriends.html?source="+u))})):$("body").alert({text:"<h2>"+(a.resultData.code.msg||j)+"</h2>"}):3===a.resultCode?window.location.href=e.login:$("body").alert({text:"<h2>"+j+"</h2>"})})}),l(o,"\u5927\u5e73\u53f0\u9760\u8c31\u6d3b\u52a80\u95e8\u69db\u63d0\u73b0\uff0c\u9650\u91cf\u7ea2\u5305\uff0c\u901f\u9886\uff01","\u901f\u9886\u7ea2\u5305\uff0c\u624b\u6162\u65e0\uff01",y);var h={shareTitle:"\u901f\u9886\u7ea2\u5305\uff0c\u624b\u6162\u65e0\uff01",shareSubtitle:"\u5927\u5e73\u53f0\u9760\u8c31\u6d3b\u52a80\u95e8\u69db\u63d0\u73b0\uff0c\u9650\u91cf\u7ea2\u5305\uff0c\u901f\u9886\uff01",shareExplain:"\u5927\u5e73\u53f0\u9760\u8c31\u6d3b\u52a80\u95e8\u69db\u63d0\u73b0\uff0c\u9650\u91cf\u7ea2\u5305\uff0c\u901f\u9886\uff01",shareUrl:t+"/integrate/oldAndNew/index.html?source="+u,shareImgUrl:o};q(h)}else $("body").alert({text:a.resultData.msg||j,okCallback:function(){n(v)}});else 3===a.resultCode?window.location.href=e.login:$("body").alert({text:"<h2>"+j+"</h2>"})}):3===a.resultCode?window.location.href=e.login:$("body").alert({text:"<h2>"+j+"</h2>"})})}$(".index-popup-close").on("click",function(){var a=$(this).attr("data-closeName");$("#"+a).removeClass("mainIn").addClass("mainOut"),setTimeout(function(){$("#"+a).hide(),$("#"+a).removeClass("mainOut")},600)});function E(a){var b=void 0;return b="zhyy"==a?"//m.jr.jd.com/spe/downloadApp/index.html?id=727&activityid=668&contentParam=100000582":"xianxia"==a?"//m.jr.jd.com/spe/downloadApp/index.html?id=725&activityid=666&contentParam=100000582":"//m.jr.jd.com/spe/downloadApp/index.html?id=727&activityid=668&contentParam=100000582"}function F(a){var b=window.location.protocol;switch(a.resultData.code){case"00":"new"==a.resultData.data.user?($("#item1").show().addClass("mainIn"),$("#item1_money").text("\uffe5"+a.resultData.data.money),$("#item1_open").text("\uffe5"+a.resultData.data.open),$("#item1Btn").on("click",function(){window.location.href=b+E(u)})):"old"==a.resultData.data.user&&0!=a.resultData.data.money?($("#item3").show().addClass("mainIn"),$("#item3_money").text("\uffe5"+a.resultData.data.money),0==a.resultData.data.open?($("#item3no0").hide(),$("#item3_0").show()):($("#item3no0").show(),$("#item3_0").hide(),$("#item3_open").text("\uffe5"+a.resultData.data.open)),$("#item3Btn").on("click",function(){window.location.href=b+E(u)}),$("#item3Btn2").on("click",function(){n(v)})):"old"==a.resultData.data.user&&0==a.resultData.data.money&&($("#item4").show().addClass("mainIn"),0==a.resultData.data.open?($("#item4no0").hide(),$("#item4_0").show()):($("#item4no0").show(),$("#item4_0").hide(),$("#item4_open").text("\uffe5"+a.resultData.data.open)),$("#item4Btn").on("click",function(){n(v)}));break;case"10005":$("#item1").show().addClass("mainIn"),$("#item1_money").text("\uffe5"+a.resultData.data.money),$("#item1_open").text("\uffe5"+a.resultData.data.open),$("#item1Btn").on("click",function(){window.location.href=b+E(u)});break;case"10006":$("body").alert({text:a.resultData.msg||j});break;case"10007":$("#item5").show().addClass("mainIn"),$("#item5Btn").on("click",function(){n(v)});break;case"04":$("#item7").show().addClass("mainIn"),$("#item7Btn").on("click",function(){n(v)});break;case"10008":"undefined"==typeof a.resultData.data?($("#item6").show().addClass("mainIn"),$("#item6Btn").on("click",function(){n(v)})):($("#item6_1").show().addClass("mainIn"),$("#item6_1_money").text("\uffe5"+a.resultData.data.money),$("#item6_1Btn").on("click",function(){window.location.href=b+E(u)}),$("#item6_1Btn2").on("click",function(){n(v)}));break;case"10011":c(d.finishedEnvelop,"post",{},!1,function(a){a&&0===a.resultCode?"00"==a.resultData.code?n(v):"1001"==a.resultData.code?n(t+("/integrate/oldAndNew/inviteFriends.html?source="+u)):"1002"==a.resultData.code&&(f?g.then(function(a){this.jsOpenWeb({jumpUrl:t+"/integrate/oldAndNew/receive.html?source="+u,jumpType:8,productId:"",isclose:!1})}):window.location.href=b+E(u)):3===a.resultCode?window.location.href=e.login:$("body").alert({text:j})});break;case"10012":$("#item8").show().addClass("mainIn"),$("#item8Btn").on("click",function(){$("#item8").removeClass("mainIn").addClass("mainOut"),setTimeout(function(){$("#item8").hide(),$("#item8").removeClass("mainOut")},600)});break;default:$("body").alert({text:"<h2>"+(a.resultData.msg||j)+"</h2>"})}}});
